<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>SkillConnect - Dashboard</title>
    <style>
      /* Ensure HTML/Body are set up for full-height fixed layouts */
      html,
      body {
        height: 100%;
        overflow: hidden;
        /* Prevent body scroll, let the specific content area scroll */
      }

      /* This class forces the right content area to take up the remaining height and scroll */
      .content-area-wrapper {
        height: 100vh;
        overflow-y: auto;
      }
    </style>
  </head>

  <body>
    <div class="flex h-screen bg-gray-50">
      <nav class="w-64 bg-white flex flex-col shadow-xl z-20 fixed h-full">
        <div class="flex gap-2 items-center p-5 border-b border-gray-100">
          <svg
            class="w-8 h-8 text-indigo-600"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          <p class="text-indigo-800 font-extrabold text-2xl">SkillConnect</p>
        </div>

        <div class="mt-8 flex-grow overflow-y-auto">
          <ul class="flex flex-col gap-1 px-4 text-gray-700">
            <li class="group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300"
                href="/nav/dashboard"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 01-1 1h-3m-6 0a1 1 0001-1v-4a1 1 011-1h2a1 1 011 1v4a1 1 0001 1m-6 0h6"
                  />
                </svg>
                Dashboard
              </a>
            </li>

            <li class="group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 hover:bg-indigo-50 hover:text-indigo-600"
                href="/nav/projects"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7M3 7a2 2 0 012-2h14a2 2 0 012 2M3 7h18"
                  />
                </svg>
                Projects
              </a>
            </li>

            <li class="group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 hover:bg-indigo-50 hover:text-indigo-600"
                href="/nav/groups"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17 20h5v-2a3 3 0 00-3-3H5a3 3 0 00-3 3v2h5"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 12c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"
                  />
                </svg>
                Groups
              </a>
            </li>

            <li class="group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 hover:bg-indigo-50 hover:text-indigo-600"
                href="/nav/chat"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 10h.01M12 10h.01M16 10h.01"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                Chat
              </a>
            </li>

            <li class="group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 hover:bg-indigo-50 hover:text-indigo-600 bg-indigo-50 text-indigo-600 font-medium"
                href="/nav/profile"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 14c-4.418 0-8 3.582-8 8h16c0-4.418-3.582-8-8-8z"
                  />
                </svg>
                Profile
              </a>
            </li>

            <li class="group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 hover:bg-indigo-50 hover:text-indigo-600"
                href="/nav/setting"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 01.073.431c.219 1.056 1.14 1.636 2.2 1.636h.273c1.072 0 2.053.7 2.207 1.745a.695.695 0 00.147.165l.659.659c.745.745 1.14 1.94 1.14 3.14s-.395 2.395-1.14 3.14l-.659.659c-.06.06-.11.12-.147.165c-.154 1.045-1.076 1.636-2.207 1.745h-.273c-1.06 0-1.981.58-2.2 1.636a1.724 1.724 0 01-.073.431c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 01-.073-.431c-.219-1.056-1.14-1.636-2.2-1.636h-.273c-1.072 0-2.053-.7-2.207-1.745a.695.695 0 00-.147-.165l-.659-.659c-.745-.745-1.14-1.94-1.14-3.14s.395-2.395 1.14-3.14l.659-.659c.06-.06.11-.12.147-.165c.154-1.045 1.076-1.636 2.207-1.745h.273c1.06 0 1.981-.58 2.2-1.636a1.724 1.724 0 01.073-.431z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 14a2 2 0 100-4 2 2 0 000 4z"
                  />
                </svg>
                Setting
              </a>
            </li>
          </ul>
        </div>

        <div class="p-4 border-t border-gray-100">
          <a
            href="/nav/logout"
            class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 text-red-500 hover:bg-red-50 hover:text-red-700"
          >
            <svg
              class="w-6 h-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
              />
            </svg>
            Logout
          </a>
        </div>
      </nav>

      <div class="flex-1 ml-64 bg-zinc-900 min-h-screen text-white font-inter">
        <!-- Navbar -->
        <nav
          class="bg-zinc-800 sticky top-0 z-10 shadow-md flex justify-between p-4 items-center h-16 border-b border-zinc-700"
        >
          <div
            class="font-bold text-2xl text-indigo-400 ml-6 flex items-center gap-2"
          >
            <!-- Small profile icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-7 h-7 text-indigo-400"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z"
              />
            </svg>
            User Profile
          </div>

          <div class="flex items-center gap-3 pr-6">
            <div
              class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-semibold"
            >
              <% const fullName = user.fullname || ''; const nameParts =
              fullName.split(' ').filter(p=>p.length>0); let initials=''; if
              (nameParts.length===1){
              initials=nameParts[0].substring(0,2).toUpperCase(); } else if
              (nameParts.length>=2){
              initials=(nameParts[0][0]+nameParts[nameParts.length-1][0]).toUpperCase();
              } %> <%= initials %>
            </div>
            <div class="flex flex-col">
              <p class="font-semibold text-white"><%= user.fullname %></p>
              <p class="text-sm text-zinc-400"><%= user.university %></p>
            </div>
          </div>
        </nav>

        <!-- Profile Section -->
        <div
          class="max-w-4xl mx-auto mt-10 bg-zinc-800 rounded-2xl shadow-2xl p-8 transition hover:shadow-indigo-600/20"
        >
          <div
            class="flex flex-col md:flex-row gap-6 items-center md:items-start"
          >
            <!-- Profile Avatar -->
            <div class="flex-shrink-0 relative">
              <span
                class="w-24 h-24 flex items-center justify-center text-2xl font-bold bg-indigo-600 text-white rounded-full border-4 border-indigo-500 shadow-lg hover:scale-105 transition-transform duration-300"
              >
                <%= initials %>
              </span>
              <span
                class="absolute bottom-1 right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-zinc-800"
                title="Online"
              ></span>
            </div>

            <!-- Profile Info -->
            <div class="flex-1">
              <h2 class="text-3xl font-bold text-white">
                <%= user.fullname || "New User" %>
              </h2>
              <p class="text-indigo-400">@<%= user.username || "user_dev" %></p>
              <p class="text-zinc-300 mt-4 leading-relaxed">
                <%= user.bio || `Full-stack developer passionate about creating
                innovative solutions. Currently pursuing Computer Science with a
                focus on AI and machine learning. Love building products that
                make a difference.` %>
              </p>

              <!-- ðŸŒ Social Links -->
              <div class="flex flex-wrap gap-3 mt-6">
                <!-- GitHub -->
                <a
                  href="#"
                  class="flex items-center gap-2 bg-zinc-700 hover:bg-zinc-600 px-3 py-2 rounded-lg transition group"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 text-gray-300 group-hover:text-white"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M12 .5C5.37.5 0 5.87 0 12.5c0 5.29 3.438 9.767 8.207 11.364.6.11.793-.261.793-.579v-2.02c-3.338.727-4.043-1.416-4.043-1.416-.546-1.387-1.334-1.756-1.334-1.756-1.09-.746.082-.73.082-.73 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.809 1.304 3.495.997.107-.776.419-1.304.762-1.604-2.665-.304-5.466-1.333-5.466-5.931 0-1.31.468-2.382 1.235-3.222-.124-.303-.535-1.523.117-3.175 0 0 1.008-.323 3.301 1.23a11.48 11.48 0 0 1 3.003-.404c1.018.005 2.046.138 3.003.404 2.293-1.553 3.3-1.23 3.3-1.23.653 1.652.242 2.872.118 3.175.77.84 1.234 1.912 1.234 3.222 0 4.61-2.805 5.625-5.478 5.921.43.37.823 1.102.823 2.222v3.293c0 .321.192.694.8.576C20.565 22.262 24 17.791 24 12.5 24 5.87 18.627.5 12 .5z"
                    />
                  </svg>
                  <span class="text-sm">GitHub</span>
                </a>

                <!-- LinkedIn -->
                <a
                  href="#"
                  class="flex items-center gap-2 bg-zinc-700 hover:bg-blue-600 px-3 py-2 rounded-lg transition group"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 text-gray-300 group-hover:text-white"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M22.23 0H1.77C.79 0 0 .79 0 1.77v20.46C0 23.21.79 24 1.77 24h20.46c.98 0 1.77-.79 1.77-1.77V1.77C24 .79 23.21 0 22.23 0zM7.06 20.45H3.56V9h3.5v11.45zM5.31 7.59a2.03 2.03 0 110-4.06 2.03 2.03 0 010 4.06zm15.14 12.86h-3.5v-5.59c0-1.33-.02-3.04-1.85-3.04-1.85 0-2.13 1.45-2.13 2.95v5.68h-3.5V9h3.36v1.56h.05c.47-.89 1.62-1.83 3.33-1.83 3.56 0 4.22 2.34 4.22 5.39v6.33z"
                    />
                  </svg>
                  <span class="text-sm">LinkedIn</span>
                </a>

                <!-- Instagram -->
                <a
                  href="#"
                  class="flex items-center gap-2 bg-zinc-700 hover:bg-pink-600 px-3 py-2 rounded-lg transition group"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 text-gray-300 group-hover:text-white"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6.5-.25a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 2.5 0zM12 9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"
                    />
                  </svg>
                  <span class="text-sm">Instagram</span>
                </a>

                <!-- Facebook -->
                <a
                  href="#"
                  class="flex items-center gap-2 bg-zinc-700 hover:bg-blue-700 px-3 py-2 rounded-lg transition group"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 text-gray-300 group-hover:text-white"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M22.676 0H1.324A1.324 1.324 0 000 1.324v21.352A1.324 1.324 0 001.324 24h11.495v-9.294H9.691v-3.622h3.128V8.413c0-3.1 1.894-4.788 4.66-4.788 1.325 0 2.463.099 2.794.143v3.24h-1.918c-1.506 0-1.797.716-1.797 1.765v2.314h3.594l-.468 3.622h-3.126V24h6.127A1.324 1.324 0 0024 22.676V1.324A1.324 1.324 0 0022.676 0z"
                    />
                  </svg>
                  <span class="text-sm">Facebook</span>
                </a>
              </div>

              <!-- Contact Info -->
              <div
                class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6 text-zinc-300"
              >
                <div class="flex items-center gap-3">
                  <!-- Email Icon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 text-indigo-400 transition-transform duration-300 group-hover:scale-110"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-18 8h18a2 2 0 002-2V6a2 2 0 00-2-2H3a2 2 0 00-2 2v8a2 2 0 002 2z"
                    />
                  </svg>
                  <div>
                    <p class="text-xs font-semibold text-zinc-400">Email</p>
                    <p class="hover:text-indigo-400 transition">
                      <%= user.email || "not.set@example.com" %>
                    </p>
                  </div>
                </div>

                <div class="flex items-center gap-3">
                  <!-- University Icon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5 text-emerald-400 transition-transform duration-300 group-hover:scale-110"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M12 2l9 4.5-9 4.5L3 6.5 12 2z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M3 6.5v7a9 9 0 0018 0v-7"
                    />
                  </svg>
                  <div>
                    <p class="text-xs font-semibold text-zinc-400">
                      University
                    </p>
                    <p class="hover:text-emerald-400 transition">
                      <%= user.university || "Not Specified" %>
                    </p>
                  </div>
                </div>
              </div>

              <!-- Action Buttons -->
               
              <div class="flex flex-wrap gap-4 mt-8">
             <% if (loggedInUser && loggedInUser._id.toString() === user._id.toString()) { %>

                <button
                  class="flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-semibold shadow-md transition transform hover:scale-105"
                >
                  <!-- Edit Icon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M11 4h2m-1 0v16m8-12h-8m0 0H5m0 0v8m8-8v8m0 0H5m8 0h8"
                    />
                  </svg>
                  Edit Profile
                </button>
                <% } %>

                <button
                  class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg font-semibold shadow-md transition transform hover:scale-105"
                >
                  <!-- Share Icon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M4 12v8m0-8l8 4-8-4zm0 0l8-4-8 4zm16 0v8m0-8l-8 4 8-4zm0 0l-8-4 8 4z"
                    />
                  </svg>
                  Share Profile
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit Profile Form -->
      <div
        id="edit-profile-modal"
        class="hidden fixed inset-0 z-50 bg-black bg-opacity-70 flex justify-center items-center"
      >
        <div
          class="bg-zinc-800 rounded-lg shadow-xl w-full max-w-lg p-6 m-4 relative border border-indigo-500 transition-transform transform scale-95 opacity-0 duration-200"
          id="modal-content"
        >
          <h3 class="text-xl font-bold text-white mb-4">Edit Profile</h3>
          <button
            id="close-modal-btn"
            class="absolute top-3 right-3 text-zinc-400 hover:text-white"
            aria-label="Close"
          >
            âœ–
          </button>

          <form
            action="/users/edit/<%= user._id %>"
            method="POST"
            id="edit-form"
            class="space-y-4"
          >
            <div>
              <label
                for="fullname-input"
                class="block text-sm font-medium text-zinc-300"
                >Username</label
              >
              <input
                type="text"
                id="fullname-input"
                name="username"
                value="<%= user.username || '' %>"
                class="mt-1 block w-full rounded-md border-zinc-600 bg-zinc-700 text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"
              />
            </div>

            <div>
              <label
                for="bio-input"
                class="block text-sm font-medium text-zinc-300"
                >Bio</label
              >
              <textarea
                id="bio-input"
                name="bio"
                rows="3"
                class="mt-1 block w-full rounded-md border-zinc-600 bg-zinc-700 text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"
              >
<%= user.bio || '' %></textarea
              >
            </div>

            <div>
              <label
                for="email-input"
                class="block text-sm font-medium text-zinc-300"
                >Email</label
              >
              <input
                type="email"
                id="email-input"
                name="email"
                value="<%= user.email || '' %>"
                class="mt-1 block w-full rounded-md border-zinc-600 bg-zinc-700 text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"
              />
            </div>

            <div>
              <label
                for="university-input"
                class="block text-sm font-medium text-zinc-300"
                >University</label
              >
              <input
                type="text"
                id="university-input"
                name="university"
                value="<%= user.university || '' %>"
                class="mt-1 block w-full rounded-md border-zinc-600 bg-zinc-700 text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"
              />
            </div>

            <div class="pt-4">
              <button
                type="submit"
                class="w-full px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold shadow-lg hover:bg-indigo-700 transition-colors duration-200"
              >
                Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <script>
      // Select elements
      const editBtn = document.querySelector("button.bg-indigo-600"); // Edit Profile button
      const modal = document.getElementById("edit-profile-modal");
      const modalContent = document.getElementById("modal-content");
      const closeBtn = document.getElementById("close-modal-btn");

      // Open modal when Edit Profile clicked
      editBtn.addEventListener("click", () => {
        modal.classList.remove("hidden");
        // Animate modal appearance
        setTimeout(() => {
          modalContent.classList.remove("opacity-0", "scale-95");
          modalContent.classList.add("opacity-100", "scale-100");
        }, 10);
      });

      // Close modal
      closeBtn.addEventListener("click", () => {
        modalContent.classList.add("opacity-0", "scale-95");
        setTimeout(() => {
          modal.classList.add("hidden");
        }, 200);
      });

      // Close modal when clicking outside the content box
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modalContent.classList.add("opacity-0", "scale-95");
          setTimeout(() => {
            modal.classList.add("hidden");
          }, 200);
        }
      });
    </script>
  </body>
</html>
