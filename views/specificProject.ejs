<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>SkillConnect - Dashboard</title>
    <style>
      /* Fix 1: Ensure full height and proper scrolling context */
      html,
      body {
        height: 100%;
        margin: 0;
        /* Remove overflow: hidden on body, the main flex container will handle it */
      }

      /* Fix 2: Add smooth transitions for text color on hover/focus */
      .nav-link-group a {
        color: #4b5563; /* default text-gray-700 */
        transition: all 0.3s ease-in-out;
      }
      .nav-link-group a:hover,
      .nav-link-group a.active {
        background-color: #eef2ff; /* hover:bg-indigo-50 */
        color: #4f46e5; /* hover:text-indigo-600 */
        font-weight: 500; /* font-medium for active */
      }
      .nav-link-group a.active {
        background-color: #eef2ff; /* bg-indigo-50 for active */
        color: #4f46e5; /* text-indigo-600 for active */
      }
      /* Ensure SVG colors also transition smoothly */
      .nav-link-group a svg {
        stroke: currentColor;
        transition: all 0.3s ease-in-out;
      }

      /* Base layout for the full screen */
      .content-area-wrapper {
        min-height: 100vh; /* Ensure it takes full viewport height */
        margin-left: 16rem; /* Match the w-64 (256px = 16rem) sidebar width */
        overflow-y: auto; /* Allow the content area to scroll */
        padding-top: 4rem; /* Match the sticky header height (h-16 = 4rem) */
      }
    </style>
  </head>

  <body>
    <div class="flex min-h-screen bg-gray-50">
      <nav class="w-64 bg-white flex flex-col shadow-xl z-20 fixed h-full">
        <div class="flex gap-2 items-center p-5 border-b border-gray-100">
          <svg
            class="w-8 h-8 text-indigo-600"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          <p class="text-indigo-800 font-extrabold text-2xl">JokoHub</p>
        </div>

        <div class="mt-8 flex-grow overflow-y-auto">
          <ul class="flex flex-col gap-1 px-4 text-gray-700">
            <li class="nav-link-group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg"
                href="/nav/dashboard"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 01-1 1h-3m-6 0a1 1 0001-1v-4a1 1 011-1h2a1 1 011 1v4a1 1 0001 1m-6 0h6"
                  />
                </svg>
                Dashboard
              </a>
            </li>

            <li class="nav-link-group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg active"
                href="/nav/projects"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10m-4-10v10m8-10v10"
                  />
                </svg>
                Projects
              </a>
            </li>

            <li class="nav-link-group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg"
                href="/nav/groups"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17 20h5v-2a3 3 0 00-3-3H5a3 3 0 00-3 3v2h5m14-4a4 4 0 10-8 0 4 4 0 008 0zM12 12c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"
                  />
                </svg>
                Groups
              </a>
            </li>

            <li class="nav-link-group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg"
                href="/nav/chat"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 10h.01M12 10h.01M16 10h.01m-2 8l-4 4V18H6a2 2 0 01-2-2V6a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2h-4z"
                  />
                </svg>
                Chat
              </a>
            </li>

            <li class="nav-link-group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg"
                href="/nav/profile"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 14c-4.418 0-8 3.582-8 8h16c0-4.418-3.582-8-8-8z"
                  />
                </svg>
                Profile
              </a>
            </li>

            <li class="nav-link-group">
              <a
                class="flex items-center gap-3 p-3 text-lg rounded-lg"
                href="/nav/setting"
              >
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 01.073.431c.219 1.056 1.14 1.636 2.2 1.636h.273c1.072 0 2.053.7 2.207 1.745a.695.695 0 00.147.165l.659.659c.745.745 1.14 1.94 1.14 3.14s-.395 2.395-1.14 3.14l-.659.659c-.06.06-.11.12-.147.165c-.154 1.045-1.076 1.636-2.207 1.745h-.273c-1.06 0-1.981.58-2.2 1.636a1.724 1.724 0 01-.073.431c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 01-.073-.431c-.219-1.056-1.14-1.636-2.2-1.636h-.273c-1.072 0-2.053-.7-2.207-1.745a.695.695 0 00-.147-.165l-.659-.659c-.745-.745-1.14-1.94-1.14-3.14s.395-2.395 1.14-3.14l.659-.659c.06-.06.11-.12.147-.165c.154-1.045 1.076-1.636 2.207-1.745h.273c1.06 0 1.981-.58 2.2-1.636a1.724 1.724 0 01.073-.431z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 14a2 2 0 100-4 2 2 0 000 4z"
                  />
                </svg>
                Setting
              </a>
            </li>
          </ul>
        </div>

        <div class="p-4 border-t border-gray-100">
          <a
            href="/nav/logout"
            class="flex items-center gap-3 p-3 text-lg rounded-lg transition-all duration-300 text-red-500 hover:bg-red-50 hover:text-red-700"
          >
            <svg
              class="w-6 h-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
              />
            </svg>
            Logout
          </a>
        </div>
      </nav>

      <div class="flex-1 content-area-wrapper">
        <nav
          class="bg-white fixed top-0 w-[calc(100%-16rem)] z-10 shadow-md flex justify-between p-4 items-center h-16 border-b border-gray-100"
        >
          <div class="font-bold text-2xl text-gray-800 ml-6">Setting</div>

          <div class="flex items-center gap-3 pr-6">
            <div
              class="w-10 h-10 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-800 font-semibold"
            >
              <% const fullName = user.fullname; const nameParts =
              fullName.split(' ').filter(part => part.length > 0); let initials
              = ''; if (nameParts.length === 1) { initials =
              nameParts[0].substring(0, 2).toUpperCase(); } else if
              (nameParts.length >= 2) { const firstNameInitial =
              nameParts[0].charAt(0); const lastNameInitial =
              nameParts[nameParts.length - 1].charAt(0); initials =
              (firstNameInitial + lastNameInitial).toUpperCase(); } %> <%=
              initials %>
            </div>
            <div class="flex flex-col justify-center">
              <p class="font-semibold text-gray-800 leading-none">
                <%= user.fullname %>
              </p>
              <p class="text-sm text-gray-500 leading-none mt-1">
                <%= user.university %>
              </p>
            </div>
          </div>
        </nav>

        <!-- Each Project Overview-->
        <div class="max-w-6xl mx-auto p-6 space-y-6">
          <div
            class="bg-white rounded-2xl shadow-lg p-3 transition-all duration-300 hover:shadow-xl"
          >
            <div class="flex justify-between items-start">
              <div>
                <h1 class="text-3xl font-bold flex items-center gap-3">
                  <%= project.projectName %>
                  <span
                    class="text-sm font-medium bg-green-100 text-green-600 px-3 py-1 rounded-full"
                    ><%= project.visibility %></span
                  >
                </h1>
                <p class="text-gray-500 text-base mt-2">
                  Project Progress Overview
                </p>
              </div>
              <div class="text-right">
                <p class="text-sm text-gray-500">
                  Created by
                  <span class="font-semibold text-gray-700"
                    ><%= project.creator.fullname %></span
                  >
                </p>
                <p class="text-sm text-gray-400">
                  <%= new Date(project.createdAt).toLocaleDateString('en-US', {
                  year: 'numeric', month: 'short', day: 'numeric' }) %>
                </p>
              </div>
            </div>

            <div class="mt-5">
              <div class="bg-gray-200 rounded-full h-2.5 overflow-hidden">
                <div
                  class="bg-indigo-500 h-2.5 w-[68%] transition-all duration-700 ease-out"
                ></div>
              </div>
              <p class="text-sm text-indigo-600 font-medium mt-2">
                68% Complete
              </p>
            </div>
          </div>

          <div id="overview" class="">
            <div class="flex gap-6 border-b border-gray-200 text-gray-600 pt-2">
              <button
                class="pb-3 border-b-2 border-indigo-500 text-indigo-600 font-semibold transition-all duration-200 hover:text-indigo-600"
              >
                Overview
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Tasks
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Chat
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Files
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Members
              </button>
            </div>

            <div
              class="grid md:grid-cols-2 gap-6 bg-white p-6 rounded-2xl shadow-lg transition-all duration-300 hover:shadow-xl"
            >
              <div>
                <h2
                  class="text-xl font-semibold text-gray-800 mb-3 flex items-center gap-2"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-indigo-500"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  Project Information
                </h2>
                <p class="text-base text-gray-600 leading-relaxed">
                  <!-- Complete redesign of our mobile application to improve user
                experience and modernize the interface. This project includes user
                research, wireframing, prototyping, and final implementation. -->
                  <%= project.projectDescription %>
                </p>
              </div>
              <div>
                <h2
                  class="text-xl font-semibold text-gray-800 mb-3 flex items-center gap-2"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-indigo-500"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.928A4 4 0 003 15z"
                    />
                  </svg>
                  Key Objectives
                </h2>
                <ul
                  class="list-disc list-inside text-base text-gray-600 space-y-2 ml-4"
                >
                  <li>Improve user engagement by **40%**</li>
                  <li>Reduce app loading time by **50%**</li>
                  <li>Implement modern design system</li>
                  <li>Enhance accessibility features</li>
                </ul>
              </div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 my-4">
              <div
                class="bg-white p-6 rounded-xl shadow-lg text-center hover:shadow-xl transition-all duration-300"
              >
                <p class="text-gray-500 text-sm">Total Tasks</p>
                <h3 class="text-3xl font-bold text-gray-800 mt-1">24</h3>
              </div>
              <div
                class="bg-white p-6 rounded-xl shadow-lg text-center hover:shadow-xl transition-all duration-300"
              >
                <p class="text-gray-500 text-sm">Completed</p>
                <h3 class="text-3xl font-bold text-green-600 mt-1">16</h3>
              </div>
              <div
                class="bg-white p-6 rounded-xl shadow-lg text-center hover:shadow-xl transition-all duration-300"
              >
                <p class="text-gray-500 text-sm">In Progress</p>
                <h3 class="text-3xl font-bold text-yellow-600 mt-1">5</h3>
              </div>
              <div
                class="bg-white p-6 rounded-xl shadow-lg text-center hover:shadow-xl transition-all duration-300"
              >
                <p class="text-gray-500 text-sm">Team Members</p>
                <h3 class="text-3xl font-bold text-indigo-600 mt-1">8</h3>
              </div>
            </div>

            <div class="flex gap-4 pt-2">
              <button
                class="flex items-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-full font-medium shadow-md hover:bg-indigo-700 transition-all duration-300 transform hover:scale-[1.02]"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                Add Task
              </button>
              <button
                class="flex items-center gap-2 border border-gray-300 px-5 py-2.5 rounded-full font-medium text-gray-700 hover:bg-gray-100 transition-all duration-300 transform hover:scale-[1.02]"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-indigo-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M18 9v3m0 0v3m0-3h3m-3 0a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 14c-4.418 0-8 3.582-8 8h16c0-4.418-3.582-8-8-8z"
                  />
                </svg>
                Invite Member
              </button>
            </div>

            <div
              class="bg-white p-6 rounded-2xl shadow-lg transition-all duration-300 hover:shadow-xl"
            >
              <h2
                class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-indigo-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                Recent Activity
              </h2>
              <div class="space-y-4">
                <div
                  class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200"
                >
                  <div class="flex items-center gap-3">
                    <div
                      class="w-8 h-8 bg-pink-200 text-pink-700 font-bold rounded-full flex items-center justify-center text-sm"
                    >
                      EW
                    </div>
                    <p class="text-base text-gray-700">
                      <span class="font-semibold">Emma Wilson</span> completed
                      task ‚ÄúUser Interface Mockups‚Äù
                    </p>
                  </div>
                  <span class="text-xs text-gray-500">2 hours ago</span>
                </div>

                <div
                  class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200"
                >
                  <div class="flex items-center gap-3">
                    <div
                      class="w-8 h-8 bg-blue-200 text-blue-700 font-bold rounded-full flex items-center justify-center text-sm"
                    >
                      MB
                    </div>
                    <p class="text-base text-gray-700">
                      <span class="font-semibold">Michael Brown</span> added 3
                      new files to the project
                    </p>
                  </div>
                  <span class="text-xs text-gray-500">4 hours ago</span>
                </div>

                <div
                  class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200"
                >
                  <div class="flex items-center gap-3">
                    <div
                      class="w-8 h-8 bg-yellow-200 text-yellow-700 font-bold rounded-full flex items-center justify-center text-sm"
                    >
                      LG
                    </div>
                    <p class="text-base text-gray-700">
                      <span class="font-semibold">Lisa Garcia</span> commented
                      on ‚ÄúNavigation Design‚Äù
                    </p>
                  </div>
                  <span class="text-xs text-gray-500">6 hours ago</span>
                </div>
              </div>
            </div>
          </div>
          <div id="tasks" class="hidden">
            <div class="flex gap-6 border-b border-gray-200 text-gray-600 pt-2">
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Overview
              </button>
              <button
                class="pb-3 border-b-2 border-indigo-500 text-indigo-600 font-semibold transition-all duration-200 hover:text-indigo-600"
              >
                Tasks
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Chat
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Files
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Members
              </button>
            </div>

            <div class="w-full bg-gray-50 p-6">
              <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-semibold text-gray-800">Task Board</h1>

                <button
                  type="submit"
                  class="openTaskModal px-5 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition"
                >
                  + New Task
                </button>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Column -->
                <div class="bg-white rounded-xl p-4 shadow border">
                  <div class="flex items-center justify-between mb-3">
                    <h2
                      class="font-semibold text-gray-800 flex items-center gap-2"
                    >
                      <i class="ri-clipboard-line text-gray-600"></i> To Do
                    </h2>
                    <span class="text-sm bg-gray-100 px-2 py-0.5 rounded">
                      <%= tasks.filter(t => t.status === "todo").length %>
                    </span>
                  </div>

                  <!-- Task Card -->
                  <div>
                    <% tasks.filter(t => t.status === "todo").forEach(task => {
                    %>
                    <div
                      class="p-4 mb-4 bg-white w-full rounded-xl border hover:shadow-md transition"
                    >
                      <div class="relative mb-1">
                        <!-- Priority Badge (only takes space in first line visually) -->
                        <p
                          class="text-sm font-medium text-base leading-tight mb-1"
                        >
                          <span
                            class="float-right ml-2 text-[10px] px-2 py-[2px] rounded-full whitespace-nowrap <%= task.priority === 'high' ? 'bg-red-100 text-red-600' : task.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-600' %>"
                          >
                            <%= task.priority %>
                          </span>

                          <%= task.title %>
                        </p>
                      </div>

                      <p class="text-sm text-gray-500 mb-3">
                        <%= task.description %>
                      </p>

                      <div class="flex justify-between">
                        <div class="flex items-center gap-2">
                          <% if (task.assignedTo) { %>
                          <img
                            src="https://i.pravatar.cc/25?u=<%= task.assignedTo._id %>"
                            class="w-4 h-4 rounded-full"
                          />
                          <p class="text-[10px]">
                            <%= task.assignedTo.username %>
                          </p>
                          <% } else { %>
                          <p class="text-sm text-gray-400">Unassigned</p>
                          <% } %>
                        </div>

                        <p class="text-[8px] leading-none text-gray-400">
                          <%= task.dueDate ? task.dueDate.toDateString() : '' %>
                        </p>
                      </div>
                    </div>
                    <% }) %>
                  </div>

                  <!-- Add Task -->

                  <button
                    class="openTaskModal w-full py-3 mt-2 border rounded-xl text-gray-600 hover:bg-gray-100 transition"
                  >
                    + Add Task
                  </button>
                </div>

                <!-- Column -->
                <div class="bg-white rounded-xl p-4 shadow border">
                  <div class="flex items-center justify-between mb-3">
                    <h2 class="font-semibold text-gray-800">In Progress</h2>
                    <span class="text-sm bg-gray-100 px-2 py-0.5 rounded"
                      >2</span
                    >
                  </div>

                  <div
                    class="p-4 mb-4 bg-white w-full rounded-xl border hover:shadow-md transition cursor-pointer"
                  >
                    <div class="flex justify-between items-center mb-1">
                      <h3 class="font-semibold text-gray-800">
                        Navigation Wireframes
                      </h3>
                      <span
                        class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full"
                        >high</span
                      >
                    </div>
                    <p class="text-sm text-gray-500 mb-3">
                      Design new navigation structure
                    </p>

                    <div class="flex justify-between items-center">
                      <div class="flex items-center gap-2">
                        <img
                          src="https://i.pravatar.cc/25?img=1"
                          class="w-6 h-6 rounded-full"
                        />
                        <p class="text-sm text-gray-700">Michael Brown</p>
                      </div>
                      <p class="text-sm text-gray-400">Dec 8</p>
                    </div>
                  </div>

                  <div
                    class="p-4 mb-4 bg-white w-full rounded-xl border hover:shadow-md transition cursor-pointer"
                  >
                    <div class="flex justify-between items-center mb-1">
                      <h3 class="font-semibold text-gray-800">
                        Icon Set Creation
                      </h3>
                      <span
                        class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full"
                        >medium</span
                      >
                    </div>
                    <p class="text-sm text-gray-500 mb-3">
                      Design custom icons for interface
                    </p>

                    <div class="flex justify-between items-center">
                      <div class="flex items-center gap-2">
                        <img
                          src="https://i.pravatar.cc/25?img=8"
                          class="w-6 h-6 rounded-full"
                        />
                        <p class="text-sm text-gray-700">Lina Garcia</p>
                      </div>
                      <p class="text-sm text-gray-400">Dec 9</p>
                    </div>
                  </div>

                  <button
                    class="openTaskModal w-full py-3 mt-2 border rounded-xl text-gray-600 hover:bg-gray-100 transition"
                  >
                    + Add Task
                  </button>
                </div>

                <!-- Column -->
                <div class="bg-white rounded-xl p-4 shadow border">
                  <div class="flex items-center justify-between mb-3">
                    <h2 class="font-semibold text-gray-800">Done</h2>
                    <span class="text-sm bg-gray-100 px-2 py-0.5 rounded"
                      >2</span
                    >
                  </div>

                  <div
                    class="p-4 mb-4 bg-white w-full rounded-xl border hover:shadow-md transition cursor-pointer"
                  >
                    <div class="flex justify-between items-center mb-1">
                      <h3 class="font-semibold text-gray-800">
                        User Interface Mockups
                      </h3>
                      <span
                        class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full"
                        >high</span
                      >
                    </div>
                    <p class="text-sm text-gray-500 mb-3">
                      Complete high-fidelity mockups
                    </p>

                    <div class="flex justify-between items-center">
                      <div class="flex items-center gap-2">
                        <img
                          src="https://i.pravatar.cc/25?img=7"
                          class="w-6 h-6 rounded-full"
                        />
                        <p class="text-sm text-gray-700">Emma Wilson</p>
                      </div>
                      <p class="text-sm text-gray-400">Dec 5</p>
                    </div>
                  </div>

                  <div
                    class="p-4 mb-4 bg-white w-full rounded-xl border hover:shadow-md transition cursor-pointer"
                  >
                    <div class="flex justify-between items-center mb-1">
                      <h3 class="font-semibold text-gray-800">
                        Brand Guidelines
                      </h3>
                      <span
                        class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full"
                        >medium</span
                      >
                    </div>
                    <p class="text-sm text-gray-500 mb-3">
                      Establish brand design system
                    </p>

                    <div class="flex justify-between items-center">
                      <div class="flex items-center gap-2">
                        <img
                          src="https://i.pravatar.cc/25?img=9"
                          class="w-6 h-6 rounded-full"
                        />
                        <p class="text-sm text-gray-700">Alex Johnson</p>
                      </div>
                      <p class="text-sm text-gray-400">Dec 3</p>
                    </div>
                  </div>
                  <button
                    class="openTaskModal w-full py-3 mt-2 border rounded-xl text-gray-600 hover:bg-gray-100 transition"
                  >
                    + Add Task
                  </button>
                </div>

                ¬†¬†¬†
              </div>
            </div>
          </div>
          <div id="chat" class="hidden">
            <div class="flex gap-6 border-b border-gray-200 text-gray-600 pt-2">
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Overview
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Tasks
              </button>
              <button
                class="pb-3 border-b-2 border-indigo-500 text-indigo-600 font-semibold transition-all duration-200 hover:text-indigo-600"
              >
                Chat
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Files
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Members
              </button>
            </div>
            <!-- Copy this single div into your page (requires Tailwind CSS) -->
            <div
              class="w-full mx-auto bg-white/90 p-4 rounded-2xl shadow-lg ring-1 ring-gray-200 font-sans"
            >
              <!-- Header -->
              <div class="flex items-center justify-between mb-4">
                <div>
                  <div class="text-lg font-semibold text-gray-900">
                    Project: <%= project.projectName %>
                  </div>
                  <div class="text-xs text-gray-500">Team chat ‚Ä¢ 6 members</div>
                </div>
                <div class="flex items-center space-x-2">
                  <div class="text-xs text-green-600 font-medium">Online</div>
                  <div
                    class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-pink-500 rounded-full text-white flex items-center justify-center text-sm"
                  >
                    CP
                  </div>
                </div>
              </div>

              <!-- Messages container -->
              <div class="space-y-3 max-h-80 overflow-y-auto pr-2">
                <!-- Message (left) -->
                <div class="flex items-start space-x-3">
                  <div class="flex-shrink-0">
                    <div
                      class="w-9 h-9 rounded-full bg-gray-200 flex items-center justify-center text-sm font-medium text-gray-700"
                    >
                      AR
                    </div>
                  </div>
                  <div>
                    <div class="text-xs text-gray-500">Aarav ‚Ä¢ 10:02 AM</div>
                    <div
                      class="mt-1 bg-gray-100 text-gray-900 px-3 py-2 rounded-lg rounded-tl-none max-w-xs shadow-sm"
                    >
                      I pushed the initial project skeleton to the repo ‚Äî check
                      the README for setup steps.
                    </div>
                  </div>
                </div>

                <!-- Message (right) -->
                <div class="flex items-start justify-end">
                  <div class="max-w-xs">
                    <div class="text-right text-xs text-gray-500">
                      Me ‚Ä¢ 10:05 AM
                    </div>
                    <div
                      class="mt-1 inline-block bg-indigo-600 text-white px-3 py-2 rounded-lg rounded-tr-none shadow"
                    >
                      Nice ‚Äî I'll integrate GitHub storage and add CI in the
                      next commit.
                    </div>
                  </div>
                </div>

                <!-- Message (left) -->
                <div class="flex items-start space-x-3">
                  <div class="flex-shrink-0">
                    <div
                      class="w-9 h-9 rounded-full bg-yellow-200 flex items-center justify-center text-sm font-medium text-yellow-800"
                    >
                      SM
                    </div>
                  </div>
                  <div>
                    <div class="text-xs text-gray-500">Sima ‚Ä¢ 10:07 AM</div>
                    <div
                      class="mt-1 bg-gray-100 text-gray-900 px-3 py-2 rounded-lg rounded-tl-none max-w-xs shadow-sm"
                    >
                      Can someone add a short demo video (30s)? Deadline is
                      today. I can write the voiceover.
                    </div>
                  </div>
                </div>

                <!-- Message (right) with file pill -->
                <div class="flex items-start justify-end">
                  <div class="max-w-xs text-right">
                    <div class="text-xs text-gray-500">Me ‚Ä¢ 10:09 AM</div>
                    <div
                      class="mt-1 inline-block bg-indigo-600 text-white px-3 py-2 rounded-lg rounded-tr-none shadow"
                    >
                      Uploaded a quick script draft ‚Äî
                      <span class="underline font-medium">script-v1.txt</span>
                    </div>
                    <div class="mt-2 flex justify-end">
                      <span
                        class="inline-flex items-center px-2.5 py-1 rounded-full bg-white/10 text-xs text-white/90"
                        >0.8 MB</span
                      >
                    </div>
                  </div>
                </div>

                <!-- System / status message -->
                <div class="text-center text-xs text-gray-400">
                  ‚Äî Project members joined: Aarav, Me, Sima, Priya, Rahul ‚Äî
                </div>

                <!-- Message (left) -->
                <div class="flex items-start space-x-3">
                  <div class="flex-shrink-0">
                    <div
                      class="w-9 h-9 rounded-full bg-pink-100 flex items-center justify-center text-sm font-medium text-pink-700"
                    >
                      PR
                    </div>
                  </div>
                  <div>
                    <div class="text-xs text-gray-500">Priya ‚Ä¢ 10:12 AM</div>
                    <div
                      class="mt-1 bg-gray-100 text-gray-900 px-3 py-2 rounded-lg rounded-tl-none max-w-xs shadow-sm"
                    >
                      I'll record the 30s video today. What scenes do we want?
                      (1) intro, (2) create project, (3) upload file, (4) join
                      group.
                    </div>
                  </div>
                </div>

                <!-- Quick reaction row -->
                <div class="flex items-center space-x-2 text-xs text-gray-500">
                  <div class="flex items-center space-x-2">
                    <div
                      class="w-6 h-6 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 text-xs"
                    >
                      üëç
                    </div>
                    <div>Got it</div>
                  </div>
                  <div class="ml-3">‚Ä¢</div>
                  <div>2 new messages</div>
                </div>
              </div>

              <!-- Composer / input -->
              <div class="mt-4">
                <label for="chat-input" class="sr-only">Write a message</label>
                <div class="flex items-center space-x-2">
                  <input
                    id="chat-input"
                    type="text"
                    placeholder="Write a short message or /todo"
                    class="flex-1 px-3 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-200"
                  />
                  <button
                    class="px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm"
                  >
                    Send
                  </button>
                </div>
                <div class="mt-2 text-xs text-gray-400">
                  Pro tip: type <span class="font-medium">/todo</span> to add a
                  task (UI only).
                </div>
                ¬†¬†
              </div>
            </div>
          </div>
          <div id="files" class="hidden">
            <div class="flex gap-6 border-b border-gray-200 text-gray-600 pt-2">
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Overview
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Tasks
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Chat
              </button>
              <button
                class="pb-3 border-b-2 border-indigo-500 text-indigo-600 font-semibold transition-all duration-200 hover:text-indigo-600"
              >
                Files
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Members
              </button>
            </div>
            <div class="w-full p-6 bg-white rounded-xl shadow">
              <!-- Header -->
              <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">
                  Project Files
                </h2>

                <div class="flex items-center gap-3">
                  <button
                    class="px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-100 transition"
                  >
                    <i class="ri-github-line"></i> Link GitHub
                  </button>

                  <label
                    for="fileUpload"
                    class="cursor-pointer px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                  >
                    <i class="ri-upload-2-line"></i> Upload File
                  </label>
                  <input id="fileUpload" type="file" class="hidden" multiple />
                </div>
              </div>

              <!-- Drag & Drop Box -->
              <div
                id="dropArea"
                class="w-full border-2 border-dashed border-gray-300 rounded-xl py-12 flex flex-col items-center justify-center cursor-pointer hover:border-blue-400 transition"
              >
                <i
                  class="ri-upload-cloud-2-line text-4xl text-gray-400 mb-3"
                ></i>
                <p class="text-gray-600">
                  Drag and drop files here, or click to browse
                </p>
                <p class="text-sm text-gray-400 mt-1">
                  Supports: PDF, DOC, FIGMA, SKETCH, ZIP (Max 50MB)
                </p>

                <input id="dropInput" type="file" class="hidden" multiple />
              </div>

              <!-- File List -->
              <div class="mt-6 space-y-4" id="fileList">
                <div
                  class="p-4 bg-white border rounded-xl flex justify-between items-center hover:shadow transition"
                >
                  <div class="flex items-center gap-4">
                    <i class="ri-file-line text-2xl text-blue-600"></i>

                    <div>
                      <p class="font-semibold text-gray-800">file.name</p>
                      <p class="text-sm text-gray-500">
                        Uploaded by file.uploadedBy ‚Ä¢ file.time ‚Ä¢ file.size
                      </p>

                      <a href="" class="text-sm text-blue-600 underline"> </a>
                    </div>
                  </div>

                  <div class="flex items-center gap-4 text-gray-500">
                    <a
                      href="/files/downloadfile.id "
                      class="hover:text-blue-600 transition"
                    >
                      <i class="ri-download-2-line text-xl"></i>
                    </a>

                    <button class="hover:text-blue-600 transition">
                      <i class="ri-share-line text-xl"></i>
                    </button>

                    <form action="/files/delete file.id " method="POST">
                      <button class="hover:text-red-600 transition">
                        <i class="ri-delete-bin-line text-xl"></i>
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="members" class="hidden">
            <div class="flex gap-6 border-b border-gray-200 text-gray-600 pt-2">
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Overview
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Tasks
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Chat
              </button>
              <button
                class="pb-3 hover:text-indigo-600 font-medium transition-colors"
              >
                Files
              </button>
              <button
                class="pb-3 border-b-2 border-indigo-500 text-indigo-600 font-semibold transition-all duration-200 hover:text-indigo-600"
              >
                Members
              </button>
            </div>
            <div class="max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen">
              <!-- Header -->
              <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-semibold">Team Members</h2>
                <button
                  class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
                >
                  Invite Member
                </button>
              </div>

              <!-- Team Grid -->
              <!-- The badge role to do tomorrow -->
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <% project.members.forEach(function(member){ %>
                <div
                  class="bg-white rounded-xl shadow p-3 flex items-center justify-between"
                >
                  <!-- Left Section -->
                  <div class="flex gap-2 w-25 border-5">
                    <div
                      class="profile cursor-pointer w-10 h-10 rounded-full bg-indigo-200 flex items-center justify-center text-indigo-800 font-bold text-lg"
                      data-member-id="<%= member._id %>"
                    >
                      <%= member.fullname.charAt(0).toUpperCase() %>
                    </div>

                    <div class="leading-tight">
                      <h3 class="font-medium inline text-lg">
                        <%= member.fullname %>
                      </h3>
                      <p class="text-gray-500 text-xs"><%= member.email %></p>
                    </div>
                    <!-- Role Badge -->
                    <div class="flex justify-between mr-10 items-center">
                      <span
                        class="p-1 rounded-full text-xs font-medium <%= String(member._id) === String(project.creator._id) ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700' %>"
                      >
                        <%= String(member._id) === String(project.creator._id) ?
                        "Owner" : "Member" %>
                      </span>
                    </div>
                  </div>
                </div>
                <% }); %>
              </div>

              <!-- Invite Section -->
              <div class="mt-10 bg-white p-5 rounded-xl shadow">
                <h3 class="font-semibold mb-3">Invite New Members</h3>
                <div class="flex gap-3">
                  <input
                    type="email"
                    placeholder="Enter email address"
                    class="flex-1 border rounded-lg px-3 py-2 focus:ring focus:ring-blue-200"
                  />
                  <select class="border px-3 py-2 rounded-lg">
                    <option>Member</option>
                    <option>Admin</option>
                    <option>Viewer</option>
                  </select>
                  <button
                    class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
                  >
                    Send Invite
                  </button>
                </div>
              </div>

              <!-- Role Permissions -->
              <div class="mt-10 bg-white p-5 rounded-xl shadow">
                <h3 class="font-semibold mb-3">Role Permissions</h3>
                <ul class="text-sm text-gray-600 leading-6">
                  <li>
                    <strong>Owner:</strong> Full access to all project features
                    and settings
                  </li>
                  <li>
                    <strong>Admin:</strong> Can manage members, tasks, and
                    project settings
                  </li>
                  <li>
                    <strong>Member:</strong> Can create/edit tasks, upload
                    files, and chat
                  </li>
                  <li><strong>Viewer:</strong> Read-only access</li>
                </ul>
                ¬†¬†
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Task Modal -->
    <div
      id="taskModal"
      class="fixed hidden inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"
    >
      <!-- Modal Box -->
      <div
        class="bg-white rounded-xl shadow-xl w-full max-w-2xl p-6 relative max-h-[90vh] overflow-y-auto"
      >
        <button
          id="closeTaskModal"
          class="absolute top-6 right-3 text-center text-gray-500 hover:text-black"
        >
          ‚úï
        </button>

        <h2 class="text-xl font-semibold mb-4 text-center">Add New Task</h2>

        <form
          id="taskForm"
          action="/projects/newTask"
          method="post"
          class="space-y-4"
        >
          <!-- Hidden Project ID -->
          <input type="hidden" name="project" value="<%= project._id %>" />

          <!-- Task Title -->
          <div>
            <label class="block text-sm font-medium mb-1">Task Title</label>
            <input
              type="text"
              name="title"
              required
              class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
            />
          </div>

          <!-- Description -->
          <div>
            <label class="block text-sm font-medium mb-1">Description</label>
            <textarea
              name="description"
              required
              class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
            ></textarea>
          </div>

          <!-- Assign To -->
          <div>
            <label class="block text-sm font-medium mb-1">Assign To</label>
            <select name="assignedTo" class="w-full p-2 border rounded-lg">
              <option value="">Unassigned</option>
              <% project.members.forEach(member => { %>
              <option value="<%= member._id %>"><%= member.username %></option>
              <% }) %>
            </select>
          </div>

          <!-- Priority -->
          <div>
            <label class="block text-sm font-medium mb-1">Priority</label>
            <select name="priority" class="w-full p-2 border rounded-lg">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
          </div>

          <!-- Due Date -->
          <div>
            <label class="block text-sm font-medium mb-1">Due Date</label>
            <input
              type="date"
              name="dueDate"
              class="w-full p-2 border rounded-lg"
            />
          </div>

          <!-- Status -->
          <div>
            <label class="block text-sm font-medium mb-1">Status</label>
            <select name="status" class="w-full p-2 border rounded-lg">
              <option value="todo">To-Do</option>
              <option value="inprogress">In Progress</option>
              <option value="done">Done</option>
            </select>
          </div>

          <!-- Submit Button -->
          <div class="flex justify-end">
            <button
              type="submit"
              class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
            >
              Add Task
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const openBtns = document.querySelectorAll(".openTaskModal");
        const closeBtn = document.getElementById("closeTaskModal");
        const modal = document.getElementById("taskModal");

        // OPEN MODAL (loop)
        openBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            modal.classList.remove("hidden");
          });
        });

        // CLOSE MODAL
        closeBtn.addEventListener("click", () => {
          modal.classList.add("hidden");
        });
      });

      // ---------------------------
      // TAB SWITCHING
      // ---------------------------
      document.addEventListener("DOMContentLoaded", () => {
        const sections = ["overview", "tasks", "chat", "files", "members"];

        document.querySelectorAll("button").forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const text = e.target.textContent.trim().toLowerCase();

            if (sections.includes(text)) {
              sections.forEach((sec) => {
                document.getElementById(sec).classList.add("hidden");
              });

              document.getElementById(text).classList.remove("hidden");
            }
          });
        });
      });
    </script>
  </body>
</html>
